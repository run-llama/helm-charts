{{- if ((($.Values.config).storageBuckets).s3proxy.enabled | default false) }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: s3proxy-config
  namespace: {{ $.Release.Namespace | quote }}
  labels: {{ include "llamacloud.labels" (dict "root" $) | indent 4 }}
  annotations: {{ include "llamacloud.annotations" (dict "root" $) | indent 4 }}
data:
  {{- include "llamacloud.s3proxy.configMap" $ | indent 2 }}
{{- end }}